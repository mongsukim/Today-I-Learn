## ğŸ“† 2022-12-29 (ëª©) TIL

### ğŸ”¥ ì˜¤ëŠ˜ í•œ ì¼ <br>

ìì¹«í•˜ë©´ 3ê°œì˜ í•¨ìˆ˜ë¥¼ ë§Œë“¤ ë»” í•œ ê²ƒì„
1ê°œì˜ í•¨ìˆ˜ë¡œ ë§Œë“œëŠ” ì‹œë„ë¥¼ í•´ë³´ì•˜ê³ , ì„±ê³µí–ˆë‹¤!

### ìˆœì„œ  
#### 1 . íŒŒì¼ ì—…ë¡œë“œë¥¼ í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ë¡œ í™”ë©´ì— ë³´ì—¬ì£¼ê³ , ê·¸ í™”ë©´ì´ ë‚˜íƒ€ë‚˜ë©´ ì—…ë¡œë“œ ë²„íŠ¼ì„ ë‚˜íƒ€ë‚´ì¤€ë‹¤.  

 

```js
const RegistOnlyThumb = (name, e) => {
    if (name == 'sumFile') {
      const ThumbImage = e.target.files;
      let ThumbUrlList = [...ThumbImg];
      for (let i = 0; i < ThumbImage.length; i++) {
        const currentImageUrl = URL.createObjectURL(ThumbImage[i]);
        //@ts-ignore
        ThumbUrlList.push(currentImageUrl);
      }
      //ì´ë¯¸ì§€ ìµœëŒ€ ì—…ë¡œë“œ 1ê°œ
      if (ThumbUrlList.length > 1) {
        ThumbUrlList = ThumbUrlList.slice(0, 1);
      }
      setThumbImg(ThumbUrlList);
    }
    if (name == 'imageSourceFile') {
      const ImageSourceImage = e.target.files;
      let UrlList = [...ImageSourceImg];
      for (let i = 0; i < ImageSourceImage.length; i++) {
        const currentImageUrl = URL.createObjectURL(ImageSourceImage[i]);
        //@ts-ignore
        UrlList.push(currentImageUrl);
      }
      //ìµœëŒ€ ì—…ë¡œë“œ 1ê°œ
      if (UrlList.length > 1) {
        UrlList = UrlList.slice(0, 1);
      }
      //@ts-ignore
      setImageSourceImg(UrlList);
    }
    if (name == 'slideFiles') {
      const imageLists = e.target.files;
      let imageUrlLists = [...showImages];
      for (let i = 0; i < imageLists.length; i++) {
        const currentImageUrl = URL.createObjectURL(imageLists[i]);
        //@ts-ignore
        imageUrlLists.push(currentImageUrl);
      }
      //ì´ë¯¸ì§€ ìµœëŒ€ ì—…ë¡œë“œ 10ê°œ
      if (imageUrlLists.length > 10) {
        imageUrlLists = imageUrlLists.slice(0, 10);
      }
      setShowImages(imageUrlLists);
    }
  };
```

#### 2. ì—…ë¡œë“œ í•œë‹¤. 

```js
const uploadImage = (data) => {
    console.log('data', data);
    const Formdata = new FormData();

    if (data == 'sumFile' || data == 'imageSourceFile') {
      const param = data;
      Formdata.append(`${param}`, document.querySelector(`#${param}`)?.files[0]);
    }
    if (data == 'slideFiles') {
      console.log(document.querySelector('#slideFiles')?.files);
      Array.from(document.querySelector('#slideFiles')?.files).forEach(
        (current, index) => {
          Formdata.append('slideFiles', slideFiles.files[index]);
        }
      );
    }

    const json = JSON.stringify({ anatdelProductSeq: ProductSeq });
    const blob = new Blob([json], {
      type: 'application/json',
    });
    Formdata.append('anatdelProductInsertReq', blob);

    useAddAnatdelImgs(
      { token: user!.accessToken, data: Formdata },
      {
        onSuccess: (data) => {
          //@ts-ignore
          // history.push('/HomepageANATDEL');
          setThumbImg(''), setShowImages(''), setImageSourceImg('');
        },
        onError: (error) => {
          //@ts-ignore
          alert(' ì‹¤íŒ¨', error);
        },
      }
    );
  };
```
